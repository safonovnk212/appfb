<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FB Ads Аналитика | Умный анализ рекламных кампаний</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- Боковая навигация -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="bi bi-graph-up-arrow"></i>
                    <span>FB Ads Аналитика</span>
                </div>
                <button id="toggle-sidebar" class="btn btn--secondary btn--sm mobile-only">
                    <i class="bi bi-x-lg"></i>
                </button>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li>
                        <a href="#" class="nav-link active" data-section="dashboard">
                            <i class="bi bi-speedometer2"></i>
                            <span>Дашборд</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-section="campaigns">
                            <i class="bi bi-bullseye"></i>
                            <span>Кампании</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-section="creatives">
                            <i class="bi bi-images"></i>
                            <span>Креативы</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-section="ai-advice">
                            <i class="bi bi-lightbulb"></i>
                            <span>AI-Советы</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-section="settings">
                            <i class="bi bi-gear"></i>
                            <span>Настройки</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <button id="theme-toggle" class="btn btn--outline btn--sm">
                    <i class="bi bi-moon"></i>
                    <span>Тёмная тема</span>
                </button>
            </div>
        </aside>

        <!-- Основное содержимое -->
        <main class="content">
            <!-- Верхняя панель -->
            <header class="header">
                <div class="header-left">
                    <button id="mobile-menu" class="btn btn--secondary btn--sm mobile-only">
                        <i class="bi bi-list"></i>
                    </button>
                    <div class="period-selector">
                        <span>Период:</span>
                        <div class="btn-group">
                            <button class="btn btn--secondary btn--sm period-btn active" data-period="day">День</button>
                            <button class="btn btn--secondary btn--sm period-btn" data-period="week">Неделя</button>
                            <button class="btn btn--secondary btn--sm period-btn" data-period="month">Месяц</button>
                        </div>
                    </div>
                </div>
                <div class="header-right">
                    <button id="add-data" class="btn btn--primary">
                        <i class="bi bi-plus-lg"></i>
                        <span>Добавить данные</span>
                    </button>
                </div>
            </header>

            <!-- Секции приложения -->
            <div class="sections">
                <!-- Дашборд -->
                <section id="dashboard" class="section active">
                    <h1 class="section-title">Обзор кампаний</h1>
                    
                    <!-- Карточки с ключевыми метриками -->
                    <div class="metrics-cards">
                        <div class="card metric-card">
                            <div class="card__body">
                                <div class="metric-title">CTR</div>
                                <div class="metric-value">2.45%</div>
                                <div class="metric-change positive">
                                    <i class="bi bi-arrow-up"></i> +0.3%
                                </div>
                            </div>
                        </div>
                        <div class="card metric-card">
                            <div class="card__body">
                                <div class="metric-title">CPC</div>
                                <div class="metric-value">45.30 ₽</div>
                                <div class="metric-change negative">
                                    <i class="bi bi-arrow-down"></i> -2.1%
                                </div>
                            </div>
                        </div>
                        <div class="card metric-card">
                            <div class="card__body">
                                <div class="metric-title">ROAS</div>
                                <div class="metric-value">4.2</div>
                                <div class="metric-change positive">
                                    <i class="bi bi-arrow-up"></i> +0.5
                                </div>
                            </div>
                        </div>
                        <div class="card metric-card">
                            <div class="card__body">
                                <div class="metric-title">Конверсии</div>
                                <div class="metric-value">201</div>
                                <div class="metric-change positive">
                                    <i class="bi bi-arrow-up"></i> +12%
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- График эффективности -->
                    <div class="card">
                        <div class="card__header">
                            <h3>Эффективность кампаний</h3>
                            <div class="chart-controls">
                                <div class="btn-group">
                                    <button class="btn btn--secondary btn--sm metric-btn active" data-metric="ctr">CTR</button>
                                    <button class="btn btn--secondary btn--sm metric-btn" data-metric="cpc">CPC</button>
                                    <button class="btn btn--secondary btn--sm metric-btn" data-metric="roas">ROAS</button>
                                </div>
                            </div>
                        </div>
                        <div class="card__body">
                            <div class="chart-container">
                                <canvas id="performanceChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Таблица активных кампаний -->
                    <div class="card">
                        <div class="card__header">
                            <h3>Активные кампании</h3>
                            <button class="btn btn--secondary btn--sm">
                                <i class="bi bi-filter"></i>
                                <span>Фильтр</span>
                            </button>
                        </div>
                        <div class="card__body p-0">
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Название</th>
                                            <th>Бюджет / день</th>
                                            <th>Расход</th>
                                            <th>CTR</th>
                                            <th>CPC</th>
                                            <th>Конверсии</th>
                                            <th>ROAS</th>
                                        </tr>
                                    </thead>
                                    <tbody id="campaignsTableBody">
                                        <!-- Данные будут загружены из JS -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Кампании -->
                <section id="campaigns" class="section">
                    <h1 class="section-title">Управление кампаниями</h1>
                    
                    <!-- Фильтры кампаний -->
                    <div class="card mb-20">
                        <div class="card__body">
                            <div class="filter-container">
                                <div class="filter-group">
                                    <label class="form-label">Статус</label>
                                    <select class="form-control">
                                        <option value="all">Все</option>
                                        <option value="active">Активные</option>
                                        <option value="paused">Приостановленные</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <label class="form-label">Цель</label>
                                    <select class="form-control">
                                        <option value="all">Все</option>
                                        <option value="conversions">Конверсии</option>
                                        <option value="traffic">Трафик</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <label class="form-label">Сортировать</label>
                                    <select class="form-control">
                                        <option value="roas_desc">ROAS (выс→низ)</option>
                                        <option value="roas_asc">ROAS (низ→выс)</option>
                                        <option value="spend_desc">Расход (выс→низ)</option>
                                        <option value="ctr_desc">CTR (выс→низ)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Список кампаний -->
                    <div id="campaignsList" class="campaigns-grid">
                        <!-- Карточки кампаний будут загружены из JS -->
                    </div>
                </section>

                <!-- Креативы -->
                <section id="creatives" class="section">
                    <h1 class="section-title">Анализ креативов</h1>
                    
                    <div class="card">
                        <div class="card__header">
                            <h3>Показатели эффективности креативов</h3>
                        </div>
                        <div class="card__body">
                            <p>Секция находится в разработке.</p>
                        </div>
                    </div>
                </section>

                <!-- AI-Советы -->
                <section id="ai-advice" class="section">
                    <h1 class="section-title">AI-Рекомендации</h1>
                    
                    <div class="card">
                        <div class="card__header">
                            <h3>Умные советы для оптимизации</h3>
                            <div class="status status--info">Обновлено сегодня</div>
                        </div>
                        <div class="card__body">
                            <div class="advice-container" id="aiAdviceContainer">
                                <!-- Советы AI будут загружены из JS -->
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card__header">
                            <h3>Прогноз улучшений</h3>
                        </div>
                        <div class="card__body">
                            <div class="chart-container">
                                <canvas id="improvementChart"></canvas>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Настройки -->
                <section id="settings" class="section">
                    <h1 class="section-title">Настройки приложения</h1>
                    
                    <div class="card">
                        <div class="card__header">
                            <h3>Пользовательский интерфейс</h3>
                        </div>
                        <div class="card__body">
                            <div class="form-group">
                                <label class="form-label">Тема оформления</label>
                                <select class="form-control" id="themeSelector">
                                    <option value="auto">Системная (авто)</option>
                                    <option value="light">Светлая</option>
                                    <option value="dark">Тёмная</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card__header">
                            <h3>Данные</h3>
                        </div>
                        <div class="card__body">
                            <button class="btn btn--secondary" id="clearData">
                                <i class="bi bi-trash"></i>
                                <span>Очистить все данные</span>
                            </button>
                            <button class="btn btn--secondary" id="exportData">
                                <i class="bi bi-download"></i>
                                <span>Экспортировать</span>
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card__header">
                            <h3>API Интеграция</h3>
                        </div>
                        <div class="card__body">
                            <div class="form-group">
                                <label class="form-label">Facebook API токен</label>
                                <input type="text" class="form-control" placeholder="Введите ваш access token">
                            </div>
                            <button class="btn btn--primary mt-8" id="saveApiSettings">
                                <i class="bi bi-save"></i>
                                <span>Сохранить</span>
                            </button>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Модальное окно для добавления данных -->
    <div class="modal" id="addDataModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4>Добавить данные</h4>
                    <button class="btn-close" id="closeDataModal">
                        <i class="bi bi-x"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <ul class="nav-tabs">
                        <li class="nav-tab active" data-tab="url-input">Ввод ссылки</li>
                        <li class="nav-tab" data-tab="file-upload">Загрузка CSV</li>
                    </ul>
                    
                    <div class="tab-content">
                        <div class="tab-pane active" id="url-input">
                            <div class="form-group">
                                <label class="form-label">URL с параметрами Facebook Ads</label>
                                <textarea class="form-control" id="fbAdsUrl" rows="4" placeholder="https://site.com/path?fbclid={fbclid}&utm_campaign={{campaign.name}}&utm_source={{site_source_name}}..."></textarea>
                                <small class="form-help">Вставьте полную ссылку с параметрами из Facebook Ads Manager</small>
                            </div>
                            <button class="btn btn--primary" id="parseUrlBtn">
                                <i class="bi bi-arrow-right-circle"></i>
                                <span>Извлечь данные</span>
                            </button>
                        </div>
                        
                        <div class="tab-pane" id="file-upload">
                            <div class="form-group">
                                <label class="form-label">CSV файл из Facebook Ads Manager</label>
                                <div class="file-upload-container">
                                    <input type="file" id="csvFileUpload" accept=".csv">
                                    <label for="csvFileUpload" class="file-upload-label">
                                        <i class="bi bi-cloud-arrow-up"></i>
                                        <span>Выберите файл или перетащите его сюда</span>
                                    </label>
                                </div>
                            </div>
                            <button class="btn btn--primary" id="uploadCsvBtn">
                                <i class="bi bi-upload"></i>
                                <span>Загрузить</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <script src="app.js"></script>
</body>
</html>