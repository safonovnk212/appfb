<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facebook Ads Analytics - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–µ–∫–ª–∞–º—ã</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2>FB Analytics</h2>
                <div class="theme-toggle">
                    <button id="themeToggle" class="btn btn--sm">üåì</button>
                </div>
            </div>
            <ul class="sidebar-menu">
                <li><a href="#dashboard" class="menu-link active" data-section="dashboard">üìä –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</a></li>
                <li><a href="#creatives" class="menu-link" data-section="creatives">üé® –ê–Ω–∞–ª–∏–∑ –∫—Ä–µ–∞—Ç–∏–≤–æ–≤</a></li>
                <li><a href="#chat" class="menu-link" data-section="chat">üí¨ AI –ß–∞—Ç</a></li>
                <li><a href="#import" class="menu-link" data-section="import">üìÅ –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <div class="section-header">
                    <h1>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h1>
                    <button id="exportData" class="btn btn--secondary">–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
                </div>

                <!-- Summary Cards -->
                <div class="summary-grid">
                    <div class="card summary-card">
                        <div class="card__body">
                            <h3>–û–±—â–∏–µ –∑–∞—Ç—Ä–∞—Ç—ã</h3>
                            <div class="metric-value" id="totalSpend">$0.00</div>
                            <div class="metric-change">–∑–∞ –≤–µ—Å—å –ø–µ—Ä–∏–æ–¥</div>
                        </div>
                    </div>
                    <div class="card summary-card">
                        <div class="card__body">
                            <h3>–í—Å–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</h3>
                            <div class="metric-value" id="totalResults">0</div>
                            <div class="metric-change">–∫–æ–Ω–≤–µ—Ä—Å–∏–∏</div>
                        </div>
                    </div>
                    <div class="card summary-card">
                        <div class="card__body">
                            <h3>–°—Ä–µ–¥–Ω–∏–π CTR</h3>
                            <div class="metric-value" id="avgCTR">0.00%</div>
                            <div class="metric-change">–∫–ª–∏–∫–∏ –ø–æ —Å—Å—ã–ª–∫–∞–º</div>
                        </div>
                    </div>
                    <div class="card summary-card">
                        <div class="card__body">
                            <h3>–°—Ä–µ–¥–Ω–∏–π CPC</h3>
                            <div class="metric-value" id="avgCPC">$0.00</div>
                            <div class="metric-change">—Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–ª–∏–∫–∞</div>
                        </div>
                    </div>
                </div>

                <!-- Charts -->
                <div class="charts-grid">
                    <div class="card">
                        <div class="card__body">
                            <h3>CTR –ø–æ –∫—Ä–µ–∞—Ç–∏–≤–∞–º</h3>
                            <canvas id="ctrChart" height="300"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card__body">
                            <h3>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤</h3>
                            <canvas id="spendChart" height="300"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Performance Table -->
                <div class="card">
                    <div class="card__body">
                        <h3>–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫—Ä–µ–∞—Ç–∏–≤–æ–≤</h3>
                        <div class="table-container">
                            <table id="performanceTable" class="data-table">
                                <thead>
                                    <tr>
                                        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                        <th>–°—Ç–∞—Ç—É—Å</th>
                                        <th>CTR</th>
                                        <th>CPC</th>
                                        <th>–ó–∞—Ç—Ä–∞—Ç—ã</th>
                                        <th>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</th>
                                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Creative Analysis Section -->
            <section id="creatives" class="content-section">
                <div class="section-header">
                    <h1>–ê–Ω–∞–ª–∏–∑ –∫—Ä–µ–∞—Ç–∏–≤–æ–≤</h1>
                    <div class="filter-controls">
                        <select id="statusFilter" class="form-control">
                            <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                            <option value="active">–ê–∫—Ç–∏–≤–Ω—ã–µ</option>
                            <option value="not_delivering">–ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è</option>
                        </select>
                    </div>
                </div>

                <div id="creativesGrid" class="creatives-grid"></div>
            </section>

            <!-- AI Chat Section -->
            <section id="chat" class="content-section">
                <div class="section-header">
                    <h1>AI –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ —Ä–µ–∫–ª–∞–º–µ</h1>
                    <div class="api-status" id="apiStatus">
                        <span class="status status--info">API –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω</span>
                    </div>
                </div>

                <div class="chat-container">
                    <div class="chat-config card">
                        <div class="card__body">
                            <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ API</h3>
                            <div class="form-group">
                                <label class="form-label" for="apiKey">Perplexity API Key:</label>
                                <input type="password" id="apiKey" class="form-control" placeholder="pplx-...">
                            </div>
                            <button id="saveApiKey" class="btn btn--primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–ª—é—á</button>
                        </div>
                    </div>

                    <div class="chat-interface">
                        <div class="chat-messages" id="chatMessages"></div>
                        
                        <div class="quick-questions">
                            <h4>–ë—ã—Å—Ç—Ä—ã–µ –≤–æ–ø—Ä–æ—Å—ã:</h4>
                            <div class="quick-buttons">
                                <button class="btn btn--outline btn--sm quick-question" data-question="–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º–æ–∏—Ö –∫—Ä–µ–∞—Ç–∏–≤–æ–≤ –∏ –¥–∞–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏">–ê–Ω–∞–ª–∏–∑ –∫—Ä–µ–∞—Ç–∏–≤–æ–≤</button>
                                <button class="btn btn--outline btn--sm quick-question" data-question="–ö–∞–∫–∏–µ –∫—Ä–µ–∞—Ç–∏–≤—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∏–∑–Ω–∞–∫–∏ —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –∞—É–¥–∏—Ç–æ—Ä–∏–∏?">–£—Å—Ç–∞–ª–æ—Å—Ç—å –∫—Ä–µ–∞—Ç–∏–≤–æ–≤</button>
                                <button class="btn btn--outline btn--sm quick-question" data-question="–î–∞–π —Å–æ–≤–µ—Ç—ã –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∫–ª–∏–∫–∞">–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è CPC</button>
                                <button class="btn btn--outline btn--sm quick-question" data-question="–ö–∞–∫–∏–µ –∫—Ä–µ–∞—Ç–∏–≤—ã —Å—Ç–æ–∏—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å?">–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
                            </div>
                        </div>

                        <div class="chat-input-container">
                            <div class="flex gap-8">
                                <input type="text" id="chatInput" class="form-control" placeholder="–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –æ–± –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–µ–∫–ª–∞–º—ã...">
                                <button id="sendMessage" class="btn btn--primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Data Import Section -->
            <section id="import" class="content-section">
                <div class="section-header">
                    <h1>–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h1>
                </div>

                <div class="import-grid">
                    <!-- CSV Upload -->
                    <div class="card">
                        <div class="card__body">
                            <h3>–ó–∞–≥—Ä—É–∑–∫–∞ CSV —Ñ–∞–π–ª–∞</h3>
                            <p>–ó–∞–≥—Ä—É–∑–∏—Ç–µ CSV —Ñ–∞–π–ª –∏–∑ Facebook Ads Manager</p>
                            <div class="file-upload-area" id="fileUploadArea">
                                <div class="upload-content">
                                    <div class="upload-icon">üìÅ</div>
                                    <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ CSV —Ñ–∞–π–ª —Å—é–¥–∞ –∏–ª–∏</p>
                                    <button class="btn btn--secondary" id="selectFileBtn">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª</button>
                                    <input type="file" id="csvFileInput" accept=".csv" style="display: none;">
                                </div>
                            </div>
                            <div id="uploadProgress" class="upload-progress hidden">
                                <div class="progress-bar">
                                    <div class="progress-fill"></div>
                                </div>
                                <p>–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–∞...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Sample Data -->
                    <div class="card">
                        <div class="card__body">
                            <h3>–î–µ–º–æ –¥–∞–Ω–Ω—ã–µ</h3>
                            <p>–ó–∞–≥—Ä—É–∑–∏—Ç–µ –æ–±—Ä–∞–∑—Ü—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</p>
                            <button id="loadSampleData" class="btn btn--primary btn--full-width">–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–µ–º–æ –¥–∞–Ω–Ω—ã–µ</button>
                        </div>
                    </div>

                    <!-- Clear Data -->
                    <div class="card">
                        <div class="card__body">
                            <h3>–û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</h3>
                            <p>–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</p>
                            <button id="clearData" class="btn btn--outline btn--full-width">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ</button>
                        </div>
                    </div>
                </div>

                <!-- Data Preview -->
                <div id="dataPreview" class="card hidden">
                    <div class="card__body">
                        <h3>–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö</h3>
                        <div id="previewContent"></div>
                        <div class="flex gap-8 mt-8">
                            <button id="confirmImport" class="btn btn--primary">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∏–º–ø–æ—Ä—Ç</button>
                            <button id="cancelImport" class="btn btn--secondary">–û—Ç–º–µ–Ω–∏—Ç—å</button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-spinner"></div>
        <p>–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="modal hidden">
        <div class="modal-content">
            <h3 id="confirmTitle">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h3>
            <p id="confirmMessage">–í—ã —É–≤–µ—Ä–µ–Ω—ã?</p>
            <div class="modal-actions">
                <button id="confirmAction" class="btn btn--primary">–î–∞</button>
                <button id="cancelAction" class="btn btn--secondary">–û—Ç–º–µ–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>